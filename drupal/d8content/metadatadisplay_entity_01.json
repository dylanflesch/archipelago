{
  "data": {
    "type": "metadatadisplay_entity--metadatadisplay_entity",
    "id": "bde1cb38-e1b8-4f2d-bc1c-bff646d2e8b7",
    "attributes": {
      "name": "Object Description",
      "twig": "{#- \nUpdated 15/02/2024 to add |striptags to html_output macro \nPreviously updated 31/10/2023 for 1.3.0 \n- switched to Macro approach; added Nav-tabs for main description display and downloads menu. \n- MACROS: \n  - uses two macros originally created by Diego, \n  - uses two macros originally created by Allison for internal-search referenced elements \n- File downloads nav-tab \n-#} \n{#- ------ Macros Start ----- -#} \n{%- macro html_output(html_title, source_datum, list_wrapper = \"p\", markdown = false) -%} \n  {# -- Macro note: if markdown is selected no wrapper will be used -#} \n  {%- if source_datum and source_datum|length > 0 -%} \n    {%- if html_title|length > 0 -%} \n<h3>{{html_title}}</h3> \n    {%- endif -%} \n\t{%- if source_datum is iterable -%} \n      {%- for source_data in source_datum -%} \n        {%- if markdown -%} \n\t\t  {{ source_data|markdown_2_html }} \n        {%- else -%} \n          <{{list_wrapper}}>{{ source_data|striptags }}</{{list_wrapper}}> \n        {%- endif -%} \n      {%- endfor -%} \n\t{%- else -%} \n      {%- if markdown -%} \n          {{ source_datum|markdown_2_html }} \n      {%- else -%} \n\t\t  <{{list_wrapper}}>{{ source_datum|striptags }}</{{list_wrapper}}> \n      {%- endif -%} \n    {%- endif -%} \n  {%- endif -%} \n{%- endmacro html_output -%} \n{%- macro html_output_list(html_title, source_datum, markdown = false) -%} \n  {# -- Macro note: if markdown is selected no wrapper will be used -#} \n  {%- if source_datum and source_datum|length > 0 -%} \n    {%- if html_title|length > 0 -%} \n<h3>{{html_title}}</h3> \n    {%- endif -%} \n  <ul> \n\t{%- if source_datum is iterable -%} \n\t  {%- for source_data in source_datum -%} \n        {%- if markdown -%} \n\t      <li>{{ source_data|markdown_2_html }}</li> \n        {%- else -%} \n          <li>{{ source_data }}</li> \n        {%- endif -%} \n\t  {%- endfor -%} \n\t{%- else -%} \n      {%- if markdown -%} \n        <li>{{ source_datum|markdown_2_html }}</li> \n      {%- else -%} \n\t\t<li>{{ source_datum }}</li> \n      {%- endif -%} \n    {%- endif -%} \n  </ul> \n  {%- endif -%} \n{%- endmacro html_output_list -%} \n{# Allison: internal search macros based off Diego's list output macro above; \nadded flag and formatting for internal search-based on value set within corresponding facet config; \none macro for simple non-LoD elements; second for LoD elements with URI and label values #} \n{%- macro html_output_search(html_title, source_datum, search_facet) -%} \n  {%- if source_datum and source_datum|length > 0 -%} \n    {%- if html_title|length > 0 -%} \n<h3>{{html_title}}</h3> \n    {%- endif -%} \n  <ul> \n\t{%- if source_datum is iterable -%} \n\t  {%- for source_data in source_datum -%} \n\t  <li><a href=\"/search?search_api_fulltext=&f%5B0%5D={{search_facet}}%3A{{ source_data|url_encode }}\" target=\"_blank\" >{{ source_data }}</a></li> \n\t  {%- endfor -%} \n\t  {%- else -%} \n\t  <li><a href=\"/search?search_api_fulltext=&f%5B0%5D={{search_facet}}%3A{{ source_datum|url_encode }}\" target=\"_blank\" >{{ source_datum }}</a></li> \n\t  {%- endif -%} \n  </ul> \n  {%- endif -%} \n{%- endmacro html_output_search -%} \n{# Use for LoD elements with URI and label values#} \n{%- macro html_output_search_lod(html_title, source_datum, search_facet) -%} \n  {%- if source_datum and source_datum|length > 0 -%} \n    {%- if html_title|length > 0 -%} \n<h3>{{html_title}}</h3> \n    {%- endif -%} \n  <ul> \n\t  {%- for source_data in source_datum -%} \n\t  <li><a href=\"/search?search_api_fulltext=&f%5B0%5D={{search_facet}}%3A{{ source_data.label|url_encode }}\" target=\"_blank\" >{{ source_data.label }}</a></li> \n\t  {%- endfor -%} \n  </ul> \n  {%- endif -%} \n{%- endmacro html_output_search_lod -%} \n{#- --- End Macros ---- -#} \n{# -- Embargo option -- #} \n{% set file_download_restricted = false %} \n{% if data_embargo.embargoed == true %} \n   {# also restrict if embargoed #} \n   {% set file_download_restricted = true %} \n{% endif %} \n{# -- File Downloads Section -- #} \n  {% set download_label = \"Download\" %} \n  {% set download_metadata_label = \"Metadata\" %} \n  {% set download_file_label = \"Files\" %} \n  {% set download_file_video = \"Videos\" %} \n  {% set download_file_audio = \"Audios\" %} \n  {% set download_file_img = \"Images\" %} \n  {% set download_file_doc = \"Documents\" %} \n  {% set download_file_text = \"Texts and transcripts\" %} \n{# Downloads as a set variable #} \n  {% set downloadlist %} \n{# May 2023, new downloads #} \n    <li><a download class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/metadata/mods/mods.xml\">MODS 3.7</a></li> \n    <li><a download class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/metadata/dc/dc.xml\">Dublin Core</a></li> \n    <li><a download class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/metadata/geojson/geojson.json\">GeoJSON</a></li> \n  {% if not file_download_restricted %} \n    {% if data.type not in ['Collection','CreativeWorkSeries'] %} \n    <li><a rel=\"nofollow\" download class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/metadata/iiifmanifest/default.jsonld\">IIIF Presentation Manifest 3.0</a></li> \n    <li><a rel=\"nofollow\" download class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/metadata/iiifmanifestv2/default.jsonld\">IIIF Presentation Manifest 2.1</a></li> \n    {% elseif data.type == 'CreativeWorkSeries' %} \n    <li><a rel=\"nofollow\" download class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/metadata/iiifmanifest3cws/default.jsonld\">IIIF Presentation Manifest 3.0</a></li> \n    {% else %} \n    <li><a rel=\"nofollow\" download class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/metadata/iiifmanifest3collection/default.jsonld\">IIIF Presentation Manifest 3.0</a></li> \n    {% endif %} \n    {% if attribute(data, 'as:document')|length < 10 and attribute(data, 'as:document')|length > 0 %} \n\t   <li><hr class=\"dropdown-divider\"></li> \n       <li><h2 class=\"dropdown-header\">{{ download_file_doc }}</h2></li> \n      {% for singledocument in attribute(data, 'as:document') %} \n\t\t<li><a download rel=\"nofollow\" class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/file/{{ singledocument['dr:uuid'] }}/download/{{ singledocument.name }}\" target=\"_blank\">{{ singledocument.name }}</a></li> \n\t  {% endfor %} \n    {% endif %} \n    {% if attribute(data, 'as:text')|length < 10 and attribute(data, 'as:text')|length > 0 %} \n\t   <li><hr class=\"dropdown-divider\"></li> \n       <li><h2 class=\"dropdown-header\">{{ download_file_text }}</h2></li> \n      {% for singletext in attribute(data, 'as:text') %} \n\t\t<li><a download rel=\"nofollow\" class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/file/{{ singletext['dr:uuid'] }}/download/{{ singletext.name }}\" target=\"_blank\">{{ singletext.name }}</a></li> \n\t  {% endfor %} \n    {% endif %} \n    {% if attribute(data, 'as:image')|length <= 10 and attribute(data, 'as:image')|length > 0 %} \n\t   <li><hr class=\"dropdown-divider\"></li> \n       <li><h2 class=\"dropdown-header\">{{ download_file_img }}</h2></li> \n      {% for singleimage in attribute(data, 'as:image') %} \n\t\t<li><a download rel=\"nofollow\" class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/file/{{ singleimage['dr:uuid'] }}/download/{{  singleimage.name }}\" target=\"_blank\">{{ singleimage.name }}</a></li> \n\t  {% endfor %} \n    {% endif %} \n    {% if attribute(data, 'as:video')|length <= 10 and attribute(data, 'as:video')|length > 0 %} \n\t   <li><hr class=\"dropdown-divider\"></li> \n       <li><h2 class=\"dropdown-header\">{{ download_file_video }}</h2></li> \n      {% for singlevideo in attribute(data, 'as:video') %} \n\t\t<li><a download rel=\"nofollow\" class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/file/{{ singlevideo['dr:uuid'] }}/download/{{ singlevideo.name }}\" target=\"_blank\">{{ singlevideo.name }}</a></li> \n\t  {% endfor %} \n    {% endif %} \n    {% if attribute(data, 'as:audio')|length <= 10 and attribute(data, 'as:audio')|length > 0 %} \n\t   <li><hr class=\"dropdown-divider\"></li> \n       <li><h2 class=\"dropdown-header\">{{ download_file_audio }}</h2></li> \n      {% for singleaudio in attribute(data, 'as:audio') %} \n\t\t<li><a download rel=\"nofollow\" class=\"dropdown-item\" href=\"/do/{{ node.uuid.value }}/file/{{ singleaudio['dr:uuid'] }}/download/{{ singleaudio.name }}\" target=\"_blank\">{{ singleaudio.name }}</a></li> \n\t  {% endfor %} \n    {% endif %} \n  {% endif %} \n  {% endset %} \n{# -- Main Object Description Display Template : Primary Nav-tab -- #} \n<nav> \n  <ul class=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\"> \n  <li class=\"nav-item\"> \n    <button class=\"nav-link active\" id=\"nav-en-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#nav-en\" type=\"button\" role=\"tab\" aria-controls=\"nav-en\" aria-selected=\"false\">Description</button> \n  </li> \n\n{# evaluate download restriction here #} \n  <li class=\"nav-item dropdown\"> \n    <a class=\"nav-link dropdown-toggle\" data-bs-toggle=\"dropdown\" href=\"#\" role=\"button\" aria-expanded=\"false\">{{ download_label }}</a> \n    <ul class=\"dropdown-menu\"> \n      <li><h2 class=\"dropdown-header\">{{ download_metadata_label }}</h2></li> \n      <li><hr class=\"dropdown-divider\"></li> \n      {{ downloadlist }} \n    </ul> \n  </li> \n{# End evaluate download restriction here #} \n</ul> \n</nav> \n<div class=\"tab-pane fade show active\" id=\"nav-en\" role=\"tabpanel\" aria-labelledby=\"nav-en-tab\"> \n{# Collection, Part of membership section #} \n{% if attribute(data, 'ismemberof') %} \n<h3>Part of Collection</h3> \n{% if attribute(data, 'ismemberof') is iterable %} \n\t{% for collection in attribute(data, 'ismemberof')%} \n\t\t{% set parentnode = bamboo_load_entity('node', collection) %} \n        {% if parentnode %} \n\t\t  {% set parentnodeurl = url('entity.node.canonical', {'node': collection}, {'absolute': true}) %} \n\t\t\t<a href=\"{{ parentnodeurl }}\">{{  parentnode.title.value }}</a> \n        {% endif %} \n\t{% endfor %} \n\t{% else %} \n\t\t{% set parentnode = bamboo_load_entity('node', attribute(data, 'ismemberof')) %} \n        {% if parentnode %} \n\t\t  {% set parentnodeurl = url('entity.node.canonical', {'node': attribute(data, 'ismemberof')}, {'absolute': true}) %} \n\t\t\t<a href=\"{{ parentnodeurl }}\">{{  parentnode.title.value }}</a> \n        {% endif %} \n{% endif %} \n{% endif %} \n{% if attribute(data, 'ispartof') %} \n<h3>Part Of</h3> \n{% if attribute(data, 'ispartof') is iterable %} \n\t{% for child in attribute(data, 'ispartof')%} \n\t\t{% set parentnode = bamboo_load_entity('node', child) %} \n        {% if parentnode %} \n\t\t  {% set parentnodeurl = url('entity.node.canonical', {'node': child}, {'absolute': true}) %} \n\t\t\t<a href=\"{{ parentnodeurl }}\">{{  parentnode.title.value }}</a> \n        {% endif %} \n\t{% endfor %} \n\t{% else %} \n\t\t{% set parentnode = bamboo_load_entity('node', attribute(data, 'ispartof')) %} \n        {% if parentnode %} \n\t\t  {% set parentnodeurl = url('entity.node.canonical', {'node': attribute(data, 'ispartof')}, {'absolute': true}) %} \n\t\t\t<a href=\"{{ parentnodeurl }}\">{{  parentnode.title.value }}</a> \n        {% endif %} \n{% endif %} \n{% endif %} \n{# End of Collection, Part of membership section #} \n{{ _self.html_output(\"Title\", data.label) }} \n{{ _self.html_output(\"URL of Original Website\", data.website_url) }} \n{% if data.creator|length > 0 or data.creator_lod|length > 0 %} \n<h3>Creators/Contributors</h3> \n<div class=\"field-content\"> \n<ul> \n\t{% if data.creator %} \n\t{% if data.creator is iterable %} \n\t\t{% for creator in data.creator %} \n  \t<li class=\"nav-item\" style=\"padding:3px;margin-top:4px;\"><a href=\"/search?search_api_fulltext=&sort_by=changed&sort_order=DESC&items_per_page=25&f%5B0%5D=descriptive_metadata_agent_labels%3A{{ creator|url_encode }}\" target=\"_blank\" >{{ creator }}</a> \n\t\t{% endfor %} \n\t{% else %} \n  \t<li class=\"nav-item\" style=\"padding:3px;margin-top:4px;\"><a href=\"/search?search_api_fulltext=&sort_by=changed&sort_order=DESC&items_per_page=25&f%5B0%5D=descriptive_metadata_agent_labels%3A{{ creator|url_encode }}\" target=\"_blank\" >{{ creator }}</a> \n    {% endif %} \n\t{% endif %} \n\t{% for creator_lod in data.creator_lod %} \n  \t<li class=\"nav-item\" style=\"padding:3px;margin-top:4px;\">{{ creator_lod.role_label }}: <a href=\"/search?search_api_fulltext=&sort_by=changed&sort_order=DESC&items_per_page=25&f%5B0%5D=descriptive_metadata_agent_labels%3A{{ creator_lod.name_label|url_encode }}\" target=\"_blank\" >{{ creator_lod.name_label }}</a> \n    {% if creator_lod.name_uri|length > 2 %} \n    \t<span class=\"badge badge-primary badge-pill\"><a class=\"nav-link active\" href=\"{{ creator_lod.name_uri }}\" target=\"_blank\" ><i class=\"fas fa-link fa-1x\"></i></a></span> \n        {% endif %} \n    </li> \n\t{% endfor %} \n\t</ul> \n</div> \n{% endif %} \n{{ _self.html_output('Description', data.description, '', true) }} \n{% set all_date_created = [] %} \n{% if data.date_created_edtf.date_free|length > 0  %} \n  {% set all_date_created = all_date_created|merge([data.date_created_edtf.date_free|trim|edtf_2_human_date('en')]) %} \n{% endif %} \n{% if ((data.date_created is defined and not empty) and (data.date_created is not iterable and data.date_created|trim|length > 0)) %} \n  {% set all_date_created = all_date_created|merge([data.date_created]) %} \n{% endif %} \n{% if ((data.date_created_free is defined and not empty) and (data.date_created_free is not iterable and data.date_created_free|trim|length > 0))  %} \n    {% set all_date_created = all_date_created|merge([data.date_created_free]) %} \n{% endif %} \n{% if all_date_created|length > 0 %} \n<h3>Date Created</h3> \n  {% for date_created in all_date_created  %} \n<p>{{ date_created }}</p> \n  {% endfor %} \n{% endif %} \n{# End of Date Created Advanced Example #} \n{# Date Issued mapping #} \n{% set all_date_issued = [] %} \n{% if data.date_issued_edtf.date_free|length > 0  %} \n  {% set all_date_issued = all_date_issued|merge([data.date_issued_edtf.date_free|trim|edtf_2_human_date('en')]) %} \n{% endif %} \n{% if ((data.date_issued is defined and not empty) and (data.date_issued is not iterable and data.date_issued|trim|length > 0)) %} \n  {% set all_date_issued = all_date_issued|merge([data.date_issued]) %} \n{% endif %} \n{% if ((data.date_issued_free is defined and not empty) and (data.date_issued_free is not iterable and data.date_issued_free|trim|length > 0))  %} \n     {% set all_date_issued = all_date_issued|merge([data.date_issued_free]) %} \n{% endif %} \n{% if all_date_issued|length > 0 %} \n<h3>Date Issued</h3> \n  {% for date_issued in all_date_issued  %} \n<p>{{ date_issued }}</p> \n  {% endfor %} \n{% endif %} \n{{ _self.html_output('Type', data.type, 'p') }} \n{{ _self.html_output('Duration', data.duration, 'p') }} \n{{ _self.html_output_list('Publisher', data.publisher) }} \n{{ _self.html_output('Rights', data.rights, '', true) }} \n{{ _self.html_output('Owning institution', data.nowner, 'p') }} \n{{ _self.html_output('Language', data.language, 'p') }} \n{{ _self.html_output('Note', data.note, 'p') }} \n{{ _self.html_output('Physical Description Extent', data.physical_description_extent, 'p') }} \n{{ _self.html_output('Related Item', data.related_item_host_title_info_title, 'p') }} \n{{ _self.html_output_search(\"Local Subjects\", data.subjects_local, \"descriptive_metadata_subjects\") }} \n{{ _self.html_output_search(\"Local Personal Names\", data.subjects_local_personal_names, \"descriptive_metadata_subjects\") }} \n{# Still part of nav-tab for Additional Information #} \n{% if logged_in %} \n<h3>Administrative Information</h3> \n<p><i>This information is only being display for Logged In Users.</i></p> \n{{ _self.html_output('Local Identifier', data.local_identifier, 'p') }} \n{% endif %} \n</div>{# Closes Main Content Nav-tab #}",
      "langcode": "und",
      "mimetype": "text/html"
    }
  }
}
