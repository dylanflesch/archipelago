{
  "data": {
    "attributes": {
      "mimetype": "application/xml",
      "name": "OAI-PMH Item with DC",
      "langcode": "und",
      "twig": "{# Created by Allison & Diego March 2024.\r\nUses Archipelago's default Simple Dublin Core XML template as base. #}\r\n{%- set oai_id = 'oai:fake:test' -%}\r\n{%- if node.uuid.value -%}\r\n{%- set oai_id = node.uuid.value -%}\r\n{%- set changed = node.changed.value|date(\"Y-m-d\") -%}\r\n{%- endif -%}\r\n<header>\r\n      <identifier>oai:localhost:{{ oai_id }}</identifier>\r\n      <datestamp>{{ changed }}</datestamp>\r\n{%- if attribute(data, 'ismemberof') -%} \r\n  {%- if attribute(data, 'ismemberof') is iterable -%} \r\n    {%- for collection in attribute(data, 'ismemberof') -%} \r\n      {%- set parentnode = bamboo_load_entity('node', collection) -%} \r\n      {%- if parentnode -%} \r\n      <setSpec>{{ parentnode.uuid.value }}</setSpec>\r\n      {%- endif -%} \r\n    {%- endfor -%} \r\n  {% else %} \r\n\t {% set parentnode = bamboo_load_entity('node', attribute(data, 'ismemberof')) %} \r\n     {% if parentnode %} \r\n\t\t<setSpec>{{ parentnode.uuid.value }}</setSpec>\r\n     {% endif %} \r\n  {% endif %} \r\n{% endif %} \r\n    </header>\r\n{% if data_api.query.verb == \"ListRecords\" or data_api.query.verb == \"GetRecord\" %}    \r\n<metadata>\r\n{% if data_api.query.metadataPrefix == 'oai_dc' %}\r\n\r\n<oai_dc:dc \r\n         xmlns:oai_dc=\"http://www.openarchives.org/OAI/2.0/oai_dc/\" \r\n         xmlns:dc=\"http://purl.org/dc/elements/1.1/\" \r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \r\n         xsi:schemaLocation=\"http://www.openarchives.org/OAI/2.0/oai_dc/ \r\n         http://www.openarchives.org/OAI/2.0/oai_dc.xsd\">\r\n<dc:title>{{ data.label|escape('html') }}</dc:title>\r\n{# Creator #}\r\n{% if data.creator|length > 0  %}\r\n\t{% if data.creator is iterable %}\r\n\t\t{% for creator in data.creator %}\r\n\t\t\t<dc:creator>{{ creator }}</dc:creator>\r\n\t\t{% endfor %}\r\n     {% else %}\r\n     \t<dc:creator>{{ data.creator }}</dc:creator>\r\n\t{% endif %} \r\n{% endif %}\r\n{% if data.creator_lod|length > 0 %}\r\n\t{% for creator_lod in data.creator_lod %}\r\n     \t<dc:creator>{{ creator_lod.name_label }}</dc:creator>\r\n\t{% endfor %}\r\n{% endif %}\r\n{# Contributor\r\n<dc:contributor></dc:contributor>\r\n#}\r\n{# Coverage \r\n<dc:coverage></dc:coverage>\r\n#}\r\n{# Date #}\r\n{% if data.date_created|length > 0 %}\r\n\t<dc:date>{{ data.date_created }}</dc:date>\r\n{% endif %}\r\n\t{% if data.date_created_edtf.date_free is defined and not empty %}\r\n\t\t<dc:date>{{ data.date_created_edtf.date_free }}</dc:date>\r\n\t{% endif %}\r\n\t{% if data.date_issued_edtf.date_free is defined and not empty %}\t\r\n\t\t<dc:date>{{ data.date_issued_edtf.date_free }}</dc:date>\r\n\t{% endif %}\t\r\n{# Description #}\r\n{% if data.description|length > 0 %}\r\n\t{% if data.description is iterable %}\r\n\t\t{% for description in data.description %}\r\n\t\t\t<dc:description>{{ description|escape('html_attr') }}</dc:description>\r\n\t\t{% endfor %}\r\n     {% else %}\r\n\t<dc:description>{{ data.description|escape('html_attr') }}</dc:description>\r\n\t{% endif %} \r\n{% endif %}\r\n{# Subject #}\r\n{# LoD Subjects #}\r\n{% if data.subject_loc|length > 0 %}\r\n\t{% for subject_loc in data.subject_loc %}\r\n     \t<dc:subject>{{ subject_loc.label }}</dc:subject>\r\n\t{% endfor %}\r\n{% endif %}\r\n{% if data.subject_lcgft_terms|length > 0 %}\r\n\t{% for subject_lcgft_terms in data.subject_lcgft_terms %}\r\n     \t<dc:subject>{{ subject_lcgft_terms.label }}</dc:subject>\r\n\t{% endfor %}\r\n{% endif %}\r\n{# Publisher #}\r\n{% if data.publisher|length > 0 %}\r\n\t<dc:publisher>{{ data.publisher }}</dc:publisher>\r\n{% endif %}  \r\n{# Language #}\r\n{% if data.language|length > 0 %}\r\n     {% if data.language is iterable %}\r\n     \t{% for language in data.language %}\r\n       \t\t<dc:language>{{ language }}</dc:language>\r\n     \t{% endfor %}\r\n     {% else %}\r\n     \t\t<dc:language>{{ data.language }}</dc:language>\r\n     {% endif %} \r\n{% endif %}\r\n{# Type #}\r\n{% if data.type|length > 0 %}\r\n\t<dc:type>{{ data.type }}</dc:type>\r\n{% endif %}    \r\n{# Format \r\n<dc:format></dc:format>\r\n#}\r\n{# Identifier #}\r\n{% if data.local_identifier|length > 0 %}\r\n \t{% if data.local_identifier is iterable %}\r\n     \t{% for local_identifier in data.local_identifier %}\r\n\t\t\t<dc:identifier>{{ local_identifier|escape('html_attr') }}</dc:identifier>\r\n        {% endfor %}\r\n       {% else %}\r\n     \t\t<dc:identifier>{{ data.local_identifier|escape('html_attr') }}</dc:identifier>\r\n    {% endif %}    \r\n{% endif %}\r\n{# Source #}\r\n{# Source #}\r\n{% if data.owner|length > 0 %}\r\n\t<dc:source>{{ data.owner }}</dc:source>\r\n{% endif %}\r\n{# Relation #}\r\n{% if node.id %}\r\n    {% set nodeurl = url('entity.node.canonical', {'node': node.id}, {'absolute': true}) %}\r\n{% else %}\r\n    {% set nodeurl = '<current>' ~ '/iiif/manifest' %}\r\n{% endif%}\r\n {% if attribute(data, 'ismemberof') %}\r\n {% if attribute(data, 'ismemberof') is iterable %}\r\n {% for collection in attribute(data, 'ismemberof')%}\r\n   {% set parentnode = bamboo_load_entity('node', collection) %}\r\n   {% set parentnodeurl = url('entity.node.canonical', {'node': collection}, {'absolute': true}) %}\r\n<dc:relation>{{ parentnode.title.value }}</dc:relation>\r\n{% endfor %}\r\n{% else %}\r\n  {% set parentnode = bamboo_load_entity('node', attribute(data, 'ismemberof')) %}\r\n  {% set parentnodeurl = url('entity.node.canonical', {'node': attribute(data, 'ismemberof')}, {'absolute': true}) %}\r\n  <dc:relation>{{ parentnode.title.value }}</dc:relation>\r\n  {% endif %}\r\n{% endif %}\r\n{# Rights #}\r\n{% if data.rights|length > 0 %} \r\n  <dc:rights>{{ data.rights }}</dc:rights>\r\n{% endif %}\r\n</oai_dc:dc>\r\n{% endif %}\r\n</metadata>\r\n{% endif %}"
    },
    "id": "b5c12175-e0a9-49e9-a698-cbba342667e0",
    "type": "metadatadisplay_entity--metadatadisplay_entity"
  }
}
